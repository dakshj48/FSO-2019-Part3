{"version":3,"sources":["List.js","Filter.js","Form.js","Notification.js","Server.js","App.js","index.js"],"names":["List","_ref","people","term","deletePerson","listHelper","arr","map","person","react_default","a","createElement","key","name","number","onClick","id","filter","toLowerCase","includes","list","Filter","props","value","newTerm","onChange","handleTermChange","Form","onSubmit","addPerson","newName","handleNameChange","newNumber","handleNumberChange","type","Notification","message","className","baseUrl","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setNewTerm","_useState9","_useState10","newMessage","setNewMessage","updatePerson","personObject","ind","findIndex","axios","put","concat","then","response","status","objectSpread","setTimeout","catch","error","data","useEffect","get","src_Notification","src_Filter","event","target","src_Form","preventDefault","window","confirm","post","create","src_List","delete","deleteID","ReactDOM","render","src_App","document","getElementById"],"mappings":"6MAwBeA,EAtBF,SAAAC,GAAkC,IAAhCC,EAAgCD,EAAhCC,OAAQC,EAAwBF,EAAxBE,KAAMC,EAAkBH,EAAlBG,aACrBC,EAAa,SAACC,GAAD,OAASA,EAAIC,IAAI,SAAAC,GAAM,OACxCC,EAAAC,EAAAC,cAAA,OAAKC,IAAKJ,EAAOK,MACdL,EAAOK,KADV,IACiBL,EAAOM,OADxB,IACgCL,EAAAC,EAAAC,cAAA,UAAQI,QAAS,kBAAMX,EAAaI,EAAOK,KAAML,EAAOQ,MAAxD,cAYlC,OACEP,EAAAC,EAAAC,cAAA,WATW,WACX,GAAY,KAATR,EAAa,CACd,IAAMG,EAAMJ,EAAOe,OAAO,SAAAT,GAAM,OAAIA,EAAOK,KAAKK,cAAcC,SAAShB,EAAKe,iBAC5E,OAAOb,EAAWC,GAEf,OAAOD,EAAWH,GAKpBkB,KCXQC,EANA,SAACC,GAAD,OACbb,EAAAC,EAAAC,cAAA,gCACoBF,EAAAC,EAAAC,cAAA,SAAOY,MAAOD,EAAME,QAASC,SAAUH,EAAMI,qBCiBpDC,EAnBF,SAACL,GACZ,OACEb,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,QAAMiB,SAAUN,EAAMO,WACpBpB,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,oBACMF,EAAAC,EAAAC,cAAA,SAAOY,MAAOD,EAAMQ,QAASL,SAAUH,EAAMS,oBAEnDtB,EAAAC,EAAAC,cAAA,sBACUF,EAAAC,EAAAC,cAAA,SAAOY,MAAOD,EAAMU,UAAWP,SAAUH,EAAMW,sBAEzDxB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAQuB,KAAK,UAAb,WCAKC,SAXM,SAAAlC,GAAiB,IAAdmC,EAAcnC,EAAdmC,QACpB,OAAgB,OAAZA,EACO,KAGP3B,EAAAC,EAAAC,cAAA,OAAK0B,UAAWD,EAAQ,IACnBA,EAAQ,sBCRfE,EAAU,eCgIDC,EA1HH,WAAM,IAAAC,EACeC,mBAAS,IADxBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACRK,EADQH,EAAA,GACCI,EADDJ,EAAA,GAAAK,EAEeN,mBAAS,IAFxBO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAERjB,EAFQkB,EAAA,GAECC,EAFDD,EAAA,GAAAE,EAGmBT,mBAAS,IAH5BU,EAAAR,OAAAC,EAAA,EAAAD,CAAAO,EAAA,GAGRlB,EAHQmB,EAAA,GAGGC,EAHHD,EAAA,GAAAE,EAIeZ,mBAAS,IAJxBa,EAAAX,OAAAC,EAAA,EAAAD,CAAAU,EAAA,GAIR7B,EAJQ8B,EAAA,GAICC,EAJDD,EAAA,GAAAE,EAKqBf,mBAAS,IAL9BgB,EAAAd,OAAAC,EAAA,EAAAD,CAAAa,EAAA,GAKRE,EALQD,EAAA,GAKIE,EALJF,EAAA,GAoDVG,EAAe,SAAC/C,EAAMC,GAC1B,IDtDYE,EAAI6C,ECsDVC,EAAMjB,EAAQkB,UAAU,SAAAvD,GAAM,OAAIA,EAAOK,OAASA,IACpDiD,GAAO,IDvDC9C,ECwDH6B,EAAQiB,GAAK9C,GDxDN6C,ECwDU,CAAChD,KAAMA,EAAMC,OAAQA,GDxDdkD,IAAMC,IAAN,GAAAC,OAAa5B,EAAb,KAAA4B,OAAwBlD,GAAM6C,ICyD1DM,KAAK,SAAAC,GACJ,GAAuB,MAApBA,EAASC,OAAgB,CAC1B,IAAMP,EAAMjB,EAAQkB,UAAU,SAAAvD,GAAM,OAAIA,EAAOK,OAASiB,IAClDxB,EAAMuC,EACZvC,EAAIwD,GAAJnB,OAAA2B,EAAA,EAAA3B,CAAA,GAAeE,EAAQiB,GAAvB,CAA6BhD,OAAQkB,IACrCc,EAAWxC,GACXqD,EACE,2BAAAO,OAA2BrD,GAAQ,YAErC0D,WAAW,WACTZ,EAAc,OACb,KACHV,EAAW,IACXG,EAAa,OAGhBoB,MAAM,SAAAC,GACDA,EAAML,SAASM,KAAKD,MAAMtD,SAAS,mBACrCwC,EACE,CAACc,EAAML,SAASM,KAAKD,MAAO,UAE9BF,WAAW,WACTZ,EAAc,OACb,OAGHA,EACE,mBAAAO,OAAmBrD,EAAnB,yCAAgE,UAElE0D,WAAW,WACTZ,EAAc,OACb,SAsBb,OAPAgB,oBAAU,WD1GSX,IAAMY,IAAItC,GC4GxB6B,KAAK,SAAAC,GACJtB,EAAWsB,EAASM,SAEvB,IAGDjE,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAACkE,EAAD,CAAczC,QAASsB,IACvBjD,EAAAC,EAAAC,cAACmE,EAAD,CAAQtD,QAASA,EAASE,iBAfL,SAACqD,GACxBxB,EAAWwB,EAAMC,OAAOzD,UAetBd,EAAAC,EAAAC,cAACsE,EAAD,CAAMpD,UA5GQ,SAACkD,GACjBA,EAAMG,iBACFrC,EAAQtC,IAAI,SAAAC,GAAM,OAAIA,EAAOK,OAAMM,SAASW,GAC/BqD,OAAOC,QAAP,GAAAlB,OAAkBpC,EAAlB,4EAEb8B,EAAa9B,EAASE,GDdf,SAAA6B,GAAY,OAAIG,IAAMqB,KAAK/C,EAASuB,GCsB7CyB,CAJqB,CACnBzE,KAAMiB,EACNhB,OAAQkB,IAGPmC,KAAK,SAAAC,GACJtB,EAAWD,EAAQqB,OAAOE,EAASM,OACnCf,EACE,UAAAO,OAAUpC,GAAW,YAErByC,WAAW,WACTZ,EAAc,OACb,KACLV,EAAW,IACXG,EAAa,MAEdoB,MAAM,SAAAC,GACLd,EACE,CAACc,EAAML,SAASM,KAAKD,MAAO,UAE9BF,WAAW,WACTZ,EAAc,OACb,QA6EqB5B,iBAtBP,SAACgD,GACxB9B,EAAW8B,EAAMC,OAAOzD,QAsBhBU,mBApBiB,SAAC8C,GAC1B3B,EAAa2B,EAAMC,OAAOzD,QAmBsBO,QAASA,EAASE,UAAWA,IAC3EvB,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAC4E,EAAD,CAAMrF,OAAQ2C,EAAS1C,KAAMqB,EAASpB,aA5ErB,SAACS,EAAMG,GACXmE,OAAOC,QAAP,UAAAlB,OAAyBrD,EAAzB,QD5CF,SAAAG,GAAE,OAAIgD,IAAMwB,OAAN,GAAAtB,OAAgB5B,EAAhB,KAAA4B,OAA2BlD,IC8C5CyE,CAASzE,GACNmD,KAAK,SAAAC,GACmB,UAApBA,EAASC,QACVvB,EAAWD,EAAQ5B,OAAO,SAAAT,GAAM,OAAIA,EAAOQ,KAAOA,YClD9D0E,IAASC,OAAOlF,EAAAC,EAAAC,cAACiF,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.e4912577.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst List = ({people, term, deletePerson}) => {\r\n  const listHelper = (arr) => arr.map(person => \r\n    <div key={person.name}>\r\n      {person.name} {person.number} <button onClick={() => deletePerson(person.name, person.id)}>delete</button>\r\n    </div>\r\n  )\r\n\r\n  const list = () => {\r\n    if(term !== '') {\r\n      const arr = people.filter(person => person.name.toLowerCase().includes(term.toLowerCase()))\r\n      return listHelper(arr)\r\n    }\r\n    else return listHelper(people)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {list()}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default List\r\n","import React from 'react'\r\n\r\nconst Filter = (props) => (\r\n  <div>\r\n    filter shown with <input value={props.newTerm} onChange={props.handleTermChange}/>\r\n  </div>\r\n)\r\n\r\nexport default Filter\r\n","import React from 'react'\r\n\r\nconst Form = (props) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit={props.addPerson}>\r\n        <h2>add a new</h2>\r\n        <div>\r\n        name: <input value={props.newName} onChange={props.handleNameChange} />\r\n        </div>\r\n        <div>\r\n          number: <input value={props.newNumber} onChange={props.handleNumberChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Form\r\n","import React from 'react'\r\nimport './style.css'\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n    return(\r\n        <div className={message[1]}>\r\n            {message[0]}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => axios.get(baseUrl)\r\nconst create = personObject => axios.post(baseUrl, personObject)\r\nconst deleteID = id => axios.delete(`${baseUrl}/${id}`)\r\nconst update = (id, personObject) => axios.put(`${baseUrl}/${id}`, personObject)\r\n\r\nexport { getAll, create, deleteID, update }\r\n","import React, { useState, useEffect } from 'react'\r\nimport List from './List'\r\nimport Filter from './Filter'\r\nimport Form from './Form'\r\nimport Notification from './Notification'\r\nimport { getAll, create, deleteID, update } from './Server'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([])\r\n  const [ newName, setNewName] = useState('')\r\n  const [ newNumber, setNewNumber] = useState('')\r\n  const [ newTerm, setNewTerm] = useState('')\r\n  const [ newMessage, setNewMessage] = useState([])\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    if (persons.map(person => person.name).includes(newName)) {\r\n      const result = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\r\n      if (result) {\r\n        updatePerson(newName, newNumber)\r\n      }\r\n    }\r\n    else {\r\n      const personObject = {\r\n        name: newName,\r\n        number: newNumber\r\n      }\r\n      create(personObject)\r\n        .then(response => {\r\n          setPersons(persons.concat(response.data))\r\n          setNewMessage(\r\n            [`Added ${newName}`, 'success']\r\n          )\r\n            setTimeout(() => {\r\n              setNewMessage(null)\r\n            }, 5000)\r\n          setNewName('')\r\n          setNewNumber('')\r\n        })\r\n        .catch(error => {\r\n          setNewMessage(\r\n            [error.response.data.error, 'error']\r\n          )\r\n          setTimeout(() => {\r\n            setNewMessage(null)\r\n          }, 5000)\r\n        })\r\n    }\r\n  }\r\n  const deletePerson = (name, id) => {\r\n    const answer = window.confirm(`Delete ${name} ?`)\r\n    if (answer) {\r\n      deleteID(id)\r\n        .then(response => {\r\n          if(response.status !== 'error') {\r\n            setPersons(persons.filter(person => person.id !== id))\r\n          }\r\n        })\r\n    }\r\n  }\r\n  const updatePerson = (name, number) => {\r\n    const ind = persons.findIndex(person => person.name === name)\r\n    if (ind > -1) {\r\n      update(persons[ind].id, {name: name, number: number})\r\n        .then(response => {\r\n          if(response.status === 200) {\r\n            const ind = persons.findIndex(person => person.name === newName)\r\n            const arr = persons\r\n            arr[ind] = {...persons[ind], number: newNumber}\r\n            setPersons(arr)\r\n            setNewMessage(\r\n              [`Updated the number for ${name}`, 'success']\r\n            )\r\n            setTimeout(() => {\r\n              setNewMessage(null)\r\n            }, 5000)\r\n            setNewName('')\r\n            setNewNumber('')\r\n          }\r\n        })\r\n        .catch(error => {\r\n          if (error.response.data.error.includes('minimum length')) {\r\n            setNewMessage(\r\n              [error.response.data.error, 'error']\r\n            )\r\n            setTimeout(() => {\r\n              setNewMessage(null)\r\n            }, 5000)  \r\n          }\r\n          else {\r\n            setNewMessage(\r\n              [`Information of ${name} has already been removed from server`, 'error']\r\n            )\r\n            setTimeout(() => {\r\n              setNewMessage(null)\r\n            }, 5000)\r\n          }\r\n        })\r\n    }\r\n  }\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n  const handleTermChange = (event) => {\r\n    setNewTerm(event.target.value)\r\n  }\r\n\r\n  useEffect(() => {\r\n    getAll()\r\n      .then(response => {\r\n        setPersons(response.data)\r\n      })\r\n  }, [])\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={newMessage} />\r\n      <Filter newTerm={newTerm} handleTermChange={handleTermChange} />\r\n      <Form addPerson={addPerson} handleNameChange={handleNameChange} \r\n            handleNumberChange={handleNumberChange} newName={newName} newNumber={newNumber} />\r\n      <h2>Numbers</h2>\r\n      <List people={persons} term={newTerm} deletePerson={deletePerson}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n"],"sourceRoot":""}